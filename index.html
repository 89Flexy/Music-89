<!DOCTYPE html>
<html lang="en">
<head>
    
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
<title>Music-89</title>

<style>
/* MOBILE VIEW */
@media (max-width: 768px){
  #desktop-warning{
    display:none;
  }
}
:root{
  --bg:#020617;
  --card:rgba(255,255,255,0.08);
  --blur:blur(26px);

  /* ü©µ Light Blue theme */
  --accent:#38bdf8;          /* main blue */
  --accent-soft:rgba(56,189,248,.35);
  --accent-glow:rgba(125,211,252,.6);

  --text:#e5e7eb;
  --muted:#9ca3af;
}

*{
  box-sizing:border-box;
  font-family:Poppins,system-ui;
}

body {
  margin:0;
  background:
    radial-gradient(circle at top,#0b2a3d,#020617 65%),
    #000;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  color:var(--text);
}

/* üî• PLAYER CARD */
.player{
  width:360px;
  position:relative;
  border-radius:26px;
  padding:18px;

  /* üñº IMAGE BACKGROUND */
  background:
    linear-gradient(
      rgba(2,6,23,.75),
      rgba(2,6,23,.75)
    ),
    url("https://i.ibb.co/zTVdbryZ/de013aa3d799c9797f188f408bdf8268.jpg");

  background-size:cover;
  background-position:center;

  backdrop-filter:blur(26px);

  box-shadow:
    0 0 0 1px rgba(255,255,255,.08),
    0 30px 70px rgba(0,0,0,.7),
    0 0 45px var(--accent-soft);
}

/* ‚ú® glowing glass edge */
.player::before{
  content:"";
  position:absolute;
  inset:0;
  border-radius:26px;
  padding:1px;
  background:linear-gradient(
    135deg,
    transparent,
    var(--accent),
    transparent
  );
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  pointer-events:none;
}

/* üéµ COVER */
.cover{
  height:220px;
  border-radius:18px;
  background:
    radial-gradient(circle at top,#7dd3fc,#38bdf8);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:64px;
  margin-bottom:15px;
  box-shadow:
    inset 0 0 30px rgba(0,0,0,.4),
    0 0 30px var(--accent-glow);
}

/* TITLE */
.title{text-align:center;}
.title h3{
  margin:4px 0;
  font-weight:600;
}
.title p{
  margin:0;
  font-size:13px;
  color:var(--muted);
}

/* üéö PROGRESS */
.progress input{
  width:100%;
  margin:14px 0;
  accent-color:var(--accent);
}

/* CONTROLS */
.controls{
  display:flex;
  justify-content:center;
  gap:22px;
}

.controls button{
  border:none;
  background:none;
  color:var(--text);
  font-size:20px;
  cursor:pointer;
  opacity:.85;
}
.controls button:hover{opacity:1;}

.play{
  width:58px;
  height:58px;
  border-radius:50%;
  background:var(--accent);
  color:#022c22;
  font-size:22px;
  box-shadow:
    0 0 28px var(--accent-glow),
    0 8px 25px rgba(0,0,0,.6);
}

/* ‚ûï ADD MUSIC */
.add{
  margin-top:16px;
  background:linear-gradient(135deg,#38bdf8,#7dd3fc);
  color:#022c22;
  padding:12px;
  border-radius:14px;
  text-align:center;
  font-weight:600;
  cursor:pointer;
  box-shadow:0 0 25px var(--accent-soft);
}
.add:hover{filter:brightness(1.08);}

/* üìú PLAYLIST */
.list{
  margin-top:14px;
  max-height:160px;
  overflow:auto;
}

.song{
  padding:10px 12px;
  background:rgba(255,255,255,.05);
  border-radius:12px;
  margin-bottom:8px;
  cursor:pointer;
  font-size:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
}
.song:hover{
  background:rgba(56,189,248,.18);
  box-shadow:0 0 14px rgba(56,189,248,.35);
}
</style>
<style>
  body {
    background-image: url("https://example.com/your-image.jpg");
    background-size: cover;
    background-repeat: no-repeat;
    background-position: center;
  }
</style>
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
  apiKey: "AIzaSyBE2KLUA3QKLBO6AKyMPufF5SnWGYMmFjI",
  authDomain: "music-89.firebaseapp.com",
  projectId: "music-89"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

window.login = () => {
  signInWithPopup(auth, provider)
    .catch(err => alert(err.message));
};

onAuthStateChanged(auth, (user)=>{
  // hide black screen once auth is ready
  document.getElementById("boot-screen")?.classList.add("hide");

  if(user){
    document.getElementById("login-screen").style.display="none";
    document.getElementById("user-photo").src = user.photoURL;
    document.getElementById("user-photo").style.display="block";
  }else{
    document.getElementById("login-screen").style.display="flex";
  }
});
</script>
</head>
<style>
    /* üîù TOP BAR */
.topbar{
  position:absolute;
  top:14px;
  left:14px;
  right:14px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  z-index:5;
}

/* üü¶ LOGO */
.logo{
  width:38px;
  height:38px;
  border-radius:50%;
  object-fit:cover;
  box-shadow:0 0 14px rgba(56,189,248,.6);
}

/* ‚öô SETTINGS ICON */
.settings{
  font-size:20px;
  cursor:pointer;
  color:var(--text);
  padding:0;
  background:none;
  border-radius:0;
}

.settings:hover{
  color:var(--accent);
}
/* BACKGROUND MODAL */
#bgModal {
  position: fixed;
  inset: 0;
  display: none;           /* hidden by default */
  justify-content: center;
  align-items: center;
  background: rgba(0,0,0,0.6);
  backdrop-filter: blur(6px);
  z-index: 9999;           /* player ke upar aayega */
}

#bgModal .modalBox {
  width: 320px;
  background: rgba(255,255,255,0.08);
  backdrop-filter: blur(25px);
  border-radius: 22px;
  padding: 16px;
  box-shadow:
    0 0 0 1px rgba(255,255,255,.1),
    0 0 40px rgba(56,189,248,.35);
}

#bgModal h3{
  text-align:center;
  margin-bottom:12px;
}

#bgModal .imgGrid{
  display:grid;
  grid-template-columns: repeat(3,1fr);
  gap:10px;
}

#bgModal .imgGrid img{
  width:100%;
  height:80px;
  object-fit:cover;
  border-radius:12px;
  cursor:pointer;
  box-shadow:0 0 10px rgba(0,0,0,.4);
}

#bgModal .imgGrid img:hover{
  outline:2px solid #38bdf8;
}

#bgModal .close{
  margin-top:10px;
  width:100%;
  padding:10px;
  border:none;
  border-radius:14px;
  font-weight:600;
  cursor:pointer;
  background: rgba(255,255,255,.1);
  color:#fff;
}
/* üåü UNIFIED TOP HEADER */
.top-header {
  position: fixed;
  top: 20px;                     /* gap from top of screen */
  left: 50%;
  transform: translateX(-50%);
  width: 90%;
  max-width: 400px;
  padding: 12px 16px;
  border-radius: 24px;
  background: rgba(2,6,23,0.6); /* glass effect */
  backdrop-filter: blur(10px);
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 8px 25px rgba(0,0,0,0.5);
  z-index: 1000;
}

/* Logo */
.top-header .logo {
  width: 36px;
  height: 36px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 0 10px rgba(56,189,248,0.5);
}

/* Header Text */
.top-header .header-text {
  flex: 1;
  text-align: center;
  font-size: 26px;
  font-family: 'Dancing Script', cursive;
  font-weight: 700;
  color: #ffffff;
  text-shadow:
    0 0 6px rgba(255,255,255,0.7),
    0 0 12px rgba(56,189,248,0.4);
}

/* Settings Icon */
.top-header .settings {
  font-size: 22px;
  color: var(--text);
  cursor: pointer;
  transition: 0.2s;
}

.top-header .settings:hover {
  color: var(--accent);
  transform: scale(1.1);
}
.player {
  margin-top: 70px; /* enough space for header */
}

/* TOP CENTER TEXT */
.top-text{
  position: absolute;
  top: 14px;
  left: 50%;
  transform: translateX(-50%);
  font-size: 28px;                /* slightly bigger for style */
  font-weight: 700;               /* bold-ish */
  font-family: 'Dancing Script', cursive;  /* sexy cursive font */
  color: #ffffff;                 /* white color */
  text-shadow:
    0 0 6px rgba(255,255,255,0.7),
    0 0 12px rgba(56,189,248,0.4); /* subtle glow */
  z-index: 5;
}
</style>
    <div class="top-text"> Music 89 
    </div>
  
<body>
<div id="boot-screen"></div>
<div id="login-screen">
  <div class="login-card">
    <div class="logo-circle">üéß</div>

    <h1>Music 89</h1>
    <p>Feel the music. Save your vibe.</p>

    <button class="google-btn" onclick="login()">
      <img src="https://www.svgrepo.com/show/475656/google-color.svg">
      Continue with Google
    </button>

    <span class="note">Your music stays safe & synced ‚òÅÔ∏è</span>
  </div>
</div>
<style>
    /* üñ§ BOOT / SPLASH SCREEN */
#boot-screen{
  position:fixed;
  inset:0;
  background:#000;
  z-index:10000;
  transition:opacity .35s ease, visibility .35s ease;
}

#boot-screen.hide{
  opacity:0;
  visibility:hidden;
}
#user-photo{
  position:fixed;
/* üîê LOGIN SCREEN */
#login-screen{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background:
    radial-gradient(circle at top,#0b2a3d,#020617 70%),
    #000;
  z-index:9999;
}

.login-card{
  width:320px;
  padding:28px 22px;
  border-radius:26px;
  text-align:center;
  background:rgba(255,255,255,0.08);
  backdrop-filter:blur(25px);
  box-shadow:
    0 0 0 1px rgba(255,255,255,.1),
    0 30px 80px rgba(0,0,0,.7),
    0 0 45px rgba(56,189,248,.35);
  animation: fadeUp .6s ease;
}

/* logo */
.logo-circle{
  width:64px;
  height:64px;
  margin:0 auto 14px;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:32px;
  background:linear-gradient(135deg,#38bdf8,#7dd3fc);
  color:#022c22;
  box-shadow:0 0 25px rgba(56,189,248,.6);
}

/* title */
.login-card h1{
  margin:6px 0 4px;
  font-size:28px;
  font-family:'Dancing Script', cursive;
  color:#fff;
}

.login-card p{
  font-size:13px;
  color:#9ca3af;
  margin-bottom:22px;
}

/* Google button */
.google-btn{
  width:100%;
  padding:12px 14px;
  border:none;
  border-radius:18px;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  font-size:14px;
  font-weight:600;
  cursor:pointer;
  background:#fff;
  color:#111;
  transition:.25s;
  box-shadow:0 8px 25px rgba(0,0,0,.4);
}

.google-btn img{
  width:18px;
  height:18px;
}

.google-btn:hover{
  transform:translateY(-2px);
  box-shadow:0 12px 30px rgba(56,189,248,.45);
}

/* footer note */
.note{
  display:block;
  margin-top:16px;
  font-size:11px;
  color:#9ca3af;
}

/* animation */
@keyframes fadeUp{
  from{
    opacity:0;
    transform:translateY(20px);
  }
  to{
    opacity:1;
    transform:translateY(0);
  }
}
/* üåø GREEN THEME VARIABLES */
:root{
  --green:#22c55e;
  --green-soft:rgba(34,197,94,.45);
  --green-glow:rgba(34,197,94,.75);
}

/* üîê LOGIN CARD (UPGRADED) */
.login-card{
  position:relative;
  width:320px;
  padding:28px 22px;
  border-radius:28px;
  text-align:center;
  background:rgba(10,15,25,0.55);
  backdrop-filter:blur(28px);
  box-shadow:
    0 0 0 1px rgba(255,255,255,.08),
    0 0 35px var(--green-soft),
    0 40px 90px rgba(0,0,0,.75);
  animation: fadeUp .6s ease;
}

/* ‚ú® GLASS EDGE BORDER */
.login-card::before{
  content:"";
  position:absolute;
  inset:0;
  padding:1px;
  border-radius:28px;
  background:linear-gradient(
    135deg,
    transparent,
    var(--green),
    transparent
  );
  -webkit-mask:
    linear-gradient(#000 0 0) content-box,
    linear-gradient(#000 0 0);
  -webkit-mask-composite:xor;
  pointer-events:none;
}

/* üí° SOFT OUTER GLOW */
.login-card::after{
  content:"";
  position:absolute;
  inset:-8px;
  border-radius:30px;
  background:radial-gradient(
    circle at top,
    var(--green-glow),
    transparent 70%
  );
  filter:blur(28px);
  opacity:.55;
  z-index:-1;
}

/* üåü LOGO CIRCLE GLOW */
.logo-circle{
  background:linear-gradient(135deg,#22c55e,#86efac);
  box-shadow:
    0 0 18px var(--green-glow),
    0 0 45px var(--green-soft);
}

/* üü¢ GOOGLE BUTTON GLOW */
.google-btn{
  background:#ffffff;
  box-shadow:
    0 0 0 1px rgba(0,0,0,.05),
    0 0 22px var(--green-soft),
    0 10px 30px rgba(0,0,0,.45);
}

.google-btn:hover{
  box-shadow:
    0 0 30px var(--green-glow),
    0 14px 40px rgba(0,0,0,.6);
}

/* üíö TITLE GLOW */
.login-card h1{
  text-shadow:
    0 0 6px rgba(255,255,255,.6),
    0 0 14px var(--green-soft);
}

/* subtle breathing glow */
@keyframes greenPulse{
  0%{ box-shadow:0 0 25px var(--green-soft); }
  50%{ box-shadow:0 0 45px var(--green-glow); }
  100%{ box-shadow:0 0 25px var(--green-soft); }
}

.login-card{
  animation:
    fadeUp .6s ease,
    greenPulse 5s ease-in-out infinite;
}
</style>
    <div class="top-text"> Music 89 </div>
    
    <!-- üé® BACKGROUND SELECT MODAL -->
<div class="modal" id="bgModal">
  <div class="modalBox">
    <h3>Select Background</h3>

    <div class="imgGrid" id="bgGrid">
      <img src="https://i.ibb.co/zTVdbryZ/de013aa3d799c9797f188f408bdf8268.jpg">
      <img src="https://i.ibb.co/8gx8BS4X/1d20a039aba4dc4c82771ea3c66e2d54.jpg">
      <img src="https://i.ibb.co/DPScgsrF/f1b77c0de51121eec732ef83a3ec7c37.jpg">
      <img src="https://i.ibb.co/0yHnf74b/2bf895a0de170f2ff258b42d6899f618.jpg">
         <img src="https://i.ibb.co/KpLQXFq6/50bfa025afdee5e622a3b83e610bebfe.jpg">
      <img src="https://i.ibb.co/fmzX9d6/aa63b5174989763ab84f45d840d3ca32.jpg">
         <img src="https://i.ibb.co/XZ2fPM2S/fdfaa5dfd4e19b07adf7bdbee9b32ead.jpg">
      <img src="https://i.ibb.co/hFkg6YRp/96700cdea149b6adf41ffb449c7e0627.jpg">
      <img src="https://i.ibb.co/jPggQM0p/b42e169df3029cff2b50ce099dc2bc8f.jpg">
      <img src="https://i.ibb.co/TxvfNRVM/f572857a2d09adc2c567947ca167d66e.jpg">
         <img src="https://i.ibb.co/4Z4NyB8Z/2be32b7c95a6aa4f9b0abf8278e301c5.jpg">
      <img src="https://i.ibb.co/pBYxKvKj/4bc8e3f73beec0707b29746c04205947.jpg">
       
       
       
       
       
        <img src="https://i.ibb.co/LXQhh2Tr/7d7ec98360521efa7b9699bb5f0ad533.jpg">
      <img src="https://i.ibb.co/9mdLFDJZ/b6eef9fda5ef3ea7bcc1e9751a930250.jpg">
         <img src="https://i.ibb.co/fzmXxjPq/7b4afa33e5bddf06067ea4fc1bb09bbb.jpg">
      <img src="https://i.ibb.co/272XBYPQ/a4e8713ab66a7ca5aeb2bee7ce99272d.jpg">
      <img src="https://i.ibb.co/mCR3vR1K/8cd2391b0e8074fd5ba390a55799f750.jpg">
      <img src="https://i.ibb.co/mrQV5pCv/ff096c4cff4838df7a5a9cf2b6cefc9b.jpg">
         <img src="https://i.ibb.co/TGPTYN2/2f98f4c0e5d632ed99413d4a4db9e398.jpg">
      <img src="https://i.ibb.co/zHjwFVB2/8ebdb75fcb50244277dfe960464807d0.jpg">
         <img src="https://i.ibb.co/Zp0Qk7rx/313ef7ee7df3a08f4e1342e2fde4222a.jpg">
         
    </div>

    <button class="close" onclick="closeBgModal()">Close</button>
  </div>
</div>
<!-- üîù TOP BAR -->
<div class="topbar">
  <!-- Logo -->
    <img src="https://drive.google.com/thumbnail?id=1pVLvz0c2tYbX4ZVVPAy1ghL0DHStvf7e&sz=w2000"
    class="logo"
    alt="logo"
  >

  <!-- Settings -->
<span class="settings" onclick="openBgModal()">‚öô</span>
</div>
<div class="player">
<div class="cover" id="cover">üéµ</div>
<!-- IMAGE SELECT MODAL -->
<div class="modal" id="modal">
  <div class="modalBox">
    <h3>Select Cover</h3>

 <div class="imgGrid" id="imgGrid">

    <img src="https://drive.google.com/thumbnail?id=1pVLvz0c2tYbX4ZVVPAy1ghL0DHStvf7e&sz=w2000">
   <img src="https://drive.google.com/thumbnail?id=1fgANA0vPW_vYiZNv06YmN0hZUSGJBUuC&sz=w2000">
   <img src="https://drive.google.com/thumbnail?id=1PNGmFfDg1u3Eg3Tg51GLv7QCcaTjZSxs&sz=w2000">
<img src="https://drive.google.com/thumbnail?id=1lQjS-ZksN-5ThwJhGbifEq37EpUPKuq7&sz=w2000">
      <img src="https://i.ibb.co/0jnJ3DVC/a46ecf05788ba510e4f09d4f08d0578b.jpg">
         <img src="https://i.ibb.co/9mqzHh07/b6084f026b016b404ee4f186944e5885.jpg">
        
      <img src="https://i.ibb.co/qMQFRttN/d09e968e1ad8909221318060bc9c6208.jpg">
         <img src="https://i.ibb.co/mCtRJsSV/219764b3dae8bbe99f09223775b5870d.jpg">
            <img src="https://i.ibb.co/RT8Wby8C/c40904b2ccafb093bd44cbc78abb2209.jpg">
     
   <img src="https://drive.google.com/thumbnail?id=1hngqZ-4TUSG34EnWCUmUK1nY-Cwqh6K7&sz=w2000">
   <img src="https://drive.google.com/thumbnail?id=1T4ZCztxmXSPoYUluQAAn4rE5minna-DT&sz=w2000">
     <img src="https://i.ibb.co/twSmSXCs/a62eb6a33e1d8639dee22a6f7bdca9ac.jpg">
       <img src="https://i.ibb.co/Y4m7D1X5/afd1035cddbbce9ad27832087eba5a18.jpg">
      <img src="https://i.ibb.co/0jCgj7Xw/669ab82d0d4066f29ea6de5f2176eddf.jpg">
       <img src="https://i.ibb.co/9Hk5d5DF/f52297e4c1d9583220518699e9abe3f7.jpg">
      <img src="https://i.ibb.co/NR8f1Hg/0cf69aab8a3722f0d6805abc7c40701f.jpg">
         <img src="https://i.ibb.co/pjYJq2ys/90a397f1764dc5471fd15e13147859eb.jpg">
      <img src="https://i.ibb.co/bjy17LrF/95171b966c7ac0e51a7f0361e0b67d4c.jpg">
       <img src="https://i.ibb.co/N6BQ80TD/72ef45e9dbbdeeb95cdbba1b222fffda.jpg">
      <img src="https://i.ibb.co/23dXsYwp/22eb61a0fb4def9edc74903afae3e26d.jpg">
        <img src="https://i.ibb.co/XrpczTNP/38172ec4d67f5f60d1ce5aa19413407f.jpg">
 </div>

    <button class="close" onclick="closeModal()">Close</button>
  </div>
</div>
  <div class="title">
    <h3 id="songName">No song selected</h3>
    <p>Local Music Player</p>
  </div>

  <div class="progress">
    <input type="range" id="progress" value="0">
  </div>

  <div class="controls">
    <button onclick="prev()">‚èÆ</button>
 <button class="play" id="playBtn" onclick="toggle()">‚ñ∂</button>
    <button onclick="next()">‚è≠</button>
  </div>
<div class="add" onclick="toggle()">‚ñ∂ Play</div>
  <div class="add" onclick="file.click()">‚úö Add Music</div>

  <div class="list" id="list"></div>

  <input type="file" id="file" hidden accept="audio/*">
  <audio id="audio"></audio>
</div>
<script>
const bgModal = document.getElementById("bgModal");
const bgGrid = document.getElementById("bgGrid");

/* open modal */
function openBgModal(){
  bgModal.style.display = "flex";
}

/* close modal */
function closeBgModal(){
  bgModal.style.display = "none";
}

/* click on image to apply bg */
bgGrid.querySelectorAll("img").forEach(img => {
  img.onclick = () => {
    setPlayerBg(img.src);
    localStorage.setItem("playerBg", img.src);
    closeBgModal();
  }
});

/* function to set background */
function setPlayerBg(src){
  document.querySelector(".player").style.background =
    `linear-gradient(rgba(2,6,23,.75),rgba(2,6,23,.75)), url(${src}) center/cover`;
}

/* load saved bg on refresh */
const savedBg = localStorage.getItem("playerBg");
if(savedBg){
  setPlayerBg(savedBg);
}
</script>
<script>
    function next(){
  if(songs.length === 0) return;

  index++;
  if(index >= songs.length){
    index = 0; // last ke baad first
  }

  play(index);
}

function prev(){
  if(songs.length === 0) return;

  index--;
  if(index < 0){
    index = songs.length - 1; // first ke pehle last
  }

  play(index);
}audio.onended = () => {
  next();
};
    function toggle(){
  if(!audio.src) return;
  if(audio.paused){
    audio.play();
  }else{
    audio.pause();
  }
}

function play(i){
  index = i;
  const song = songs[i];
  audio.src = URL.createObjectURL(song.file);
  audio.play();
  nameUI.innerText = song.name;

  if(song.cover){
    cover.style.background = `url(${song.cover}) center/cover`;
    cover.innerHTML = "";
  }
}
</script>
<script>
const cover = document.getElementById("cover");
const modal = document.getElementById("modal");
const imgGrid = document.getElementById("imgGrid");

/* open modal */
cover.onclick = () => modal.style.display = "flex";
function closeModal(){
  modal.style.display = "none";
}

/* apply selected image */
imgGrid.querySelectorAll("img").forEach(img=>{
  img.onclick = ()=>{
    cover.style.background = `url(${img.src}) center/cover`;
    cover.innerHTML = "";
    localStorage.setItem("playerCover", img.src);
    closeModal();
  };
});
const savedCover = localStorage.getItem("playerCover");
if(savedCover){
  cover.style.background = `url(${savedCover}) center/cover`;
  cover.innerHTML = "";
}
</script>

<style>
/* üé∂ FLOATING COVER ANIMATION */
@keyframes floatCover {
  0%   { transform: translateY(0px); }
  50%  { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
}

.cover{
  animation: floatCover 4s ease-in-out infinite;
  box-shadow:
    0 0 35px rgba(56,189,248,.6),
    inset 0 0 30px rgba(0,0,0,.4);
}
/* ü™ü MODAL */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.6);
  backdrop-filter:blur(6px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:100;
}

.modalBox{
  width:320px;
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(25px);
  border-radius:22px;
  padding:16px;
  box-shadow:
    0 0 0 1px rgba(255,255,255,.1),
    0 0 40px rgba(56,189,248,.35);
}

.modalBox h3{
  text-align:center;
  margin:6px 0 12px;
}

.imgGrid{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
}

.imgGrid img{
  width:100%;
  height:80px;
  object-fit:cover;
  border-radius:12px;
  cursor:pointer;
  box-shadow:0 0 10px rgba(0,0,0,.4);
}
.imgGrid img:hover{
  outline:2px solid #38bdf8;
}

.upload,.close{
  width:100%;
  padding:10px;
  margin-top:10px;
  border:none;
  border-radius:14px;
  font-weight:600;
  cursor:pointer;
}

.upload{
  background:linear-gradient(135deg,#38bdf8,#7dd3fc);
}
.close{
  background:rgba(255,255,255,.1);
  color:#fff;
}</style>
<script>
/* =========================
   FIREBASE SONG FUNCTIONS
   ========================= */

// SONG SAVE (jab user song add kare)
async function saveSong(song){
  const user = auth.currentUser;
  if(!user){
    alert("Login first");
    return;
  }

  await addDoc(
    collection(db, "users", user.uid, "songs"),
    {
      title: song.title,
      artist: song.artist,
      url: song.url,
      cover: song.cover,
      createdAt: Date.now()
    }
  );
}

// SONG LOAD (login ke baad auto call)
async function loadSongs(){
  const user = auth.currentUser;
  if(!user) return;

  const q = query(
    collection(db, "users", user.uid, "songs"),
    orderBy("createdAt")
  );

  const snap = await getDocs(q);
  snap.forEach(doc=>{
    renderSong(doc.data()); // üëà tera existing function
  });
}
</script>
<script>
const audio = document.getElementById("audio");
const file = document.getElementById("file");
const list = document.getElementById("list");
const nameUI = document.getElementById("songName");
const progress = document.getElementById("progress");

let db, songs = [], index = 0;

/* --- Open IndexedDB --- */
const req = indexedDB.open("ModernMusic", 1);
req.onupgradeneeded = e => {
  e.target.result.createObjectStore("songs", { keyPath: "id", autoIncrement: true });
};
req.onsuccess = e => {
  db = e.target.result;
  loadSongs();
};
const playBtn = document.getElementById("playBtn");

function toggle(){
  // agar koi song load nahi hai
  if(!audio.src){
    if(songs.length === 0) return;
    play(0);
    playBtn.innerText = "‚¨ú";
    return;
  }

  if(audio.paused){
    audio.play();
    playBtn.innerText = "‚¨ú";
  }else{
    audio.pause();
    playBtn.innerText = "‚ñ∂";
  }
}
/* --- Load songs from DB --- */
function loadSongs() {
  songs = [];
  list.innerHTML = "";
  const tx = db.transaction("songs", "readonly").objectStore("songs");
  tx.openCursor().onsuccess = e => {
    const cursor = e.target.result;
    if (cursor) {
      const song = cursor.value;
      songs.push(song);

      // Create playlist item
      const d = document.createElement("div");
      d.className = "song";

      // --- Thumbnail Image ---
      const thumb = document.createElement("img");
      thumb.src = cover.style.backgroundImage.replace(/url\((['"])?(.*?)\1\)/gi, '$2'); 
      thumb.style.width = "36px";
      thumb.style.height = "36px";
      thumb.style.objectFit = "cover";
      thumb.style.borderRadius = "6px";
      thumb.style.marginRight = "10px";

      // --- Song Name ---
      const nameSpan = document.createElement("span");
      nameSpan.innerText = song.name;
      nameSpan.style.flex = "1";

      // --- Trash Icon ---
      const trash = document.createElement("span");
      trash.innerHTML = "";  // You can replace with font-awesome trash if you want
      trash.style.cursor = "pointer";
      trash.style.marginLeft = "10px";
      trash.onclick = (event) => {
        event.stopPropagation(); // Prevent triggering play
        deleteSong(song.id);
      };

      // Combine all elements
      d.appendChild(thumb);
      d.appendChild(nameSpan);
      d.appendChild(trash);

      // Play song when clicked (excluding trash)
      const songIndex = songs.length - 1;
      d.onclick = () => play(songIndex);

      list.appendChild(d);
      cursor.continue();
    }
  };
}
/* --- Add music --- */
file.onchange = () => {
  const f = file.files[0];
  if (!f) return;

  // Save the current cover for this song
  let coverImg = "";
  const bg = cover.style.backgroundImage;
  if (bg && bg !== "none") {
    // extract URL from backgroundImage
    coverImg = bg.slice(5, -2); // remove url("") part
  }

  const tx = db.transaction("songs", "readwrite");
  const store = tx.objectStore("songs");
  store.add({ name: f.name, file: f, cover: coverImg }).onsuccess = () => loadSongs();
};
/* --- Load songs from DB --- */
async function loadSongs(){
  const user = auth.currentUser;
  if(!user) return;

  const q = query(
    collection(db,"users",user.uid,"songs"),
    orderBy("createdAt")
  );

  const snap = await getDocs(q);
  snap.forEach(doc=>{
    renderSong(doc.data());
  });
}
      // --- Thumbnail Image ---
      const thumb = document.createElement("img");
      thumb.src = song.cover || "https://i.ibb.co/3h0V4g7/default-music.png"; // fallback
      thumb.style.width = "36px";
      thumb.style.height = "36px";
      thumb.style.objectFit = "cover";
      thumb.style.borderRadius = "6px";
      thumb.style.marginRight = "10px";

      // --- Song Name ---
      const nameSpan = document.createElement("span");
      nameSpan.innerText = song.name;
      nameSpan.style.flex = "1";

      // --- Trash Icon ---
      const trash = document.createElement("img");
      trash.src = "https://img.icons8.com/ios-glyphs/30/ffffff/trash.png"; // icons8 trash
      trash.style.width = "22px";
      trash.style.height = "22px";
      trash.style.cursor = "pointer";
      trash.style.marginLeft = "10px";
      trash.onclick = (event) => {
        event.stopPropagation(); // prevent play
        confirmDelete(song.id);
      };

      d.appendChild(thumb);
      d.appendChild(nameSpan);
      d.appendChild(trash);

      // Play song when clicked (excluding trash)
      const songIndex = songs.length - 1;
      d.onclick = () => play(songIndex);

      list.appendChild(d);
      cursor.continue();
    }
  };
}

/* --- Confirmation Modal --- */
function confirmDelete(id) {
  // create modal dynamically
  const modal = document.createElement("div");
  modal.style.position = "fixed";
  modal.style.inset = "0";
  modal.style.background = "rgba(0,0,0,0.5)";
  modal.style.backdropFilter = "blur(6px)";
  modal.style.display = "flex";
  modal.style.justifyContent = "center";
  modal.style.alignItems = "center";
  modal.style.zIndex = "1000";

  const box = document.createElement("div");
  box.style.background = "rgba(255,255,255,0.08)";
  box.style.backdropFilter = "blur(20px)";
  box.style.padding = "20px";
  box.style.borderRadius = "18px";
  box.style.textAlign = "center";
  box.style.minWidth = "260px";
  box.style.boxShadow = "0 0 40px rgba(56,189,248,.35)";

  const text = document.createElement("p");
  text.innerText = "Do you want to delete this song?";
  text.style.marginBottom = "16px";

  const yes = document.createElement("button");
  yes.innerText = "Yes";
  yes.style.marginRight = "10px";
  yes.style.padding = "8px 16px";
  yes.style.borderRadius = "10px";
  yes.style.border = "none";
  yes.style.background = "#38bdf8";
  yes.style.color = "#022c22";
  yes.style.cursor = "pointer";
  yes.onclick = () => {
    deleteSong(id);
    document.body.removeChild(modal);
  };

  const no = document.createElement("button");
  no.innerText = "No";
  no.style.padding = "8px 16px";
  no.style.borderRadius = "10px";
  no.style.border = "none";
  no.style.background = "rgba(255,255,255,0.1)";
  no.style.color = "#fff";
  no.style.cursor = "pointer";
  no.onclick = () => document.body.removeChild(modal);

  box.appendChild(text);
  box.appendChild(yes);
  box.appendChild(no);
  modal.appendChild(box);
  document.body.appendChild(modal);
}

/* --- Delete song --- */
function deleteSong(id) {
  const tx = db.transaction("songs", "readwrite");
  tx.objectStore("songs").delete(id).onsuccess = () => {
    loadSongs();
    if (songs[index] && songs[index].id === id) {
      audio.pause();
      audio.src = "";
      nameUI.innerText = "No song selected";
    }
  };
}
</script>
<script>
    /* üéö SYNC PROGRESS BAR */
audio.addEventListener("loadedmetadata", () => {
  progress.max = Math.floor(audio.duration);
});

audio.addEventListener("timeupdate", () => {
  progress.value = Math.floor(audio.currentTime);
});

progress.addEventListener("input", () => {
  audio.currentTime = progress.value;
});
progress.value = 0;
audio.src = URL.createObjectURL(song.file);
audio.play();
progress.value = 0;
</script>

  
</body>
</html>
